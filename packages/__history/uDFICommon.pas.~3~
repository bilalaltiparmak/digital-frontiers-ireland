unit uDFICommon;

interface
uses classes;

CONST
    VCL_TOOL_PAGE     =       'Digital Frontiers Ireland';

Type    TCreateDestroyStub = class(TComponent)
        Private
        FOnComponentCreate : TNotifyEvent;
        FOnComponentDestroy : TNotifyEvent;
        Public
        CONSTRUCTOR Create(AOwner : TComponent); override;
        DESTRUCTOR Destroy(); override;
        Published
        PROPERTY OnComponentCreate : TNotifyEvent read FOnComponentCreate write FOnComponentCreate;
        PROPERTY OnComponentDestroy : TNotifyEvent read FOnComponentDestroy write FOnComponentDestroy;
        Protected
end;


procedure Register();

implementation
uses uDllUtilsEx, uStubDllEventHandler, uPluginUtilsEx;

CONSTRUCTOR TCreateDestroyStub.Create(AOwner: TComponent);
begin
  Inherited Create(Self);
  if Assigned(Self.FOnComponentCreate) then OnComponentCreate(Self);
end;

DESTRUCTOR TCreateDestroyStub.Destroy;
begin
    if Assigned(Self.FOnComponentCreate) then OnComponentCreate(Self);
    Inherited Destroy;
end;

procedure Register();
Begin
  RegisterComponents(VCL_TOOL_PAGE,[TDLLManager,
                                    TPluginManager,
                                    TStubDllEventHandler]);
End;

end.
